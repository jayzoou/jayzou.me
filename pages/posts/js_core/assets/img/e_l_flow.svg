<svg width="800" height="600" viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="800" height="600" fill="#f8fafc" rx="10" />
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial, sans-serif" font-size="24" font-weight="bold" text-anchor="middle" fill="#1e293b">JavaScript Event Loop</text>

  <!-- Call Stack Section -->
  <rect x="50" y="100" width="180" height="300" rx="8" fill="#e0f2fe" stroke="#0ea5e9" stroke-width="2" />
  <text x="140" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#0369a1">Call Stack</text>
  <text x="140" y="150" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#0369a1">(LIFO)</text>
  
  <!-- Stack Frames -->
  <rect x="65" y="340" width="150" height="40" rx="4" fill="#bae6fd" stroke="#0ea5e9" />
  <text x="140" y="365" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#0369a1">Global Execution Context</text>
  <rect x="65" y="290" width="150" height="40" rx="4" fill="#7dd3fc" stroke="#0ea5e9" />
  <text x="140" y="315" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#0369a1">function foo()</text>

  <!-- Web APIs Section -->
  <rect x="570" y="100" width="180" height="180" rx="8" fill="#ffedd5" stroke="#f97316" stroke-width="2" />
  <text x="660" y="130" font-family="Arial, sans-serif" font-size="16" font-weight="bold" text-anchor="middle" fill="#9a3412">Web APIs</text>
  <text x="660" y="160" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#9a3412">DOM Events</text>
  <text x="660" y="185" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#9a3412">setTimeout / Interval</text>
  <text x="660" y="210" font-family="Arial, sans-serif" font-size="12" text-anchor="middle" fill="#9a3412">Fetch / AJAX</text>

  <!-- Event Loop Circle -->
  <path d="M 400 200 A 40 40 0 1 1 399.9 200" fill="none" stroke="#6366f1" stroke-width="4" stroke-dasharray="10,5" />
  <path d="M 435 215 L 445 200 L 425 200 Z" fill="#6366f1" />
  <text x="400" y="255" font-family="Arial, sans-serif" font-size="14" font-weight="bold" text-anchor="middle" fill="#4338ca">Event Loop</text>

  <!-- Microtask Queue -->
  <rect x="300" y="380" width="450" height="70" rx="8" fill="#f0fdf4" stroke="#22c55e" stroke-width="2" />
  <text x="315" y="405" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#15803d">Microtask Queue (Promises)</text>
  <rect x="550" y="415" width="60" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e" />
  <rect x="620" y="415" width="60" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e" />
  <rect x="690" y="415" width="50" height="25" rx="4" fill="#bbf7d0" stroke="#22c55e" />

  <!-- Callback Queue (Macrotasks) -->
  <rect x="300" y="480" width="450" height="70" rx="8" fill="#fef2f2" stroke="#ef4444" stroke-width="2" />
  <text x="315" y="505" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="#b91c1c">Callback Queue (Macrotasks)</text>
  <rect x="550" y="515" width="60" height="25" rx="4" fill="#fecaca" stroke="#ef4444" />
  <rect x="620" y="515" width="60" height="25" rx="4" fill="#fecaca" stroke="#ef4444" />
  <rect x="690" y="515" width="50" height="25" rx="4" fill="#fecaca" stroke="#ef4444" />

  <!-- Arrows and Flow -->
  <!-- Stack to Web API -->
  <path d="M 230 150 Q 400 80 570 150" fill="none" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="400" y="90" font-family="Arial, sans-serif" font-size="11" text-anchor="middle" fill="#64748b">Async Call</text>

  <!-- Web API to Callback Queue -->
  <path d="M 660 280 L 660 480" fill="none" stroke="#94a3b8" stroke-width="2" marker-end="url(#arrowhead)" />
  <text x="670" y="350" font-family="Arial, sans-serif" font-size="11" text-anchor="start" fill="#64748b">Push Callback</text>

  <!-- Loop to Stack -->
  <path d="M 360 200 Q 300 200 230 250" fill="none" stroke="#6366f1" stroke-width="2" marker-end="url(#arrowhead)" />
  
  <!-- Queues to Loop -->
  <path d="M 300 415 Q 260 415 260 300 Q 260 200 360 200" fill="none" stroke="#6366f1" stroke-width="2" stroke-dasharray="5,5" />

  <!-- Definitions for markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#94a3b8" />
    </marker>
  </defs>
</svg>
